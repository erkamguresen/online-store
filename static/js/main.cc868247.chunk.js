(this["webpackJsonponline-store"]=this["webpackJsonponline-store"]||[]).push([[0],{106:function(t,e,r){"use strict";r.r(e);var n=r(1),c=r(23),a=r.n(c),o=r(118),i=r(120),s=r(33),u=r(111),d=r(112),j=r(113),l=r(114),h=r(115),b=r(107),p=r(108),O=r(14),m=r(15),f=r(18),x=r(17),v=r(16),g="CHANGE_CATEGORY",y="GET_CATEGORIES_SUCCESS",C="GET_PRODUCTS_SUCCESS",N="CREATE_PRODUCT_SUCCESS",k="UPDATE_PRODUCT_SUCCESS",P="ADD_TO_CART",w="REMOVE_FROM_CART";function S(t){return{type:P,payload:t}}function E(t){return{type:w,payload:t}}var T=r(122),_=r(123),U=r(124),I=r(109),A=r(110),D=r(12),F=r(21),R=r(28),q=r.n(R),G=r(2),M=function(t){Object(f.a)(r,t);var e=Object(x.a)(r);function r(){return Object(O.a)(this,r),e.apply(this,arguments)}return Object(m.a)(r,[{key:"removeFromCart",value:function(t){this.props.actions.removeFromCart(t),q.a.error(t.productName+" has been removed from the cart")}},{key:"renderEmpty",value:function(){return Object(G.jsx)(b.a,{children:Object(G.jsx)(p.a,{children:"Your cart is empty"})})}},{key:"renderSummary",value:function(){var t=this;return Object(G.jsxs)(T.a,{nav:!0,inNavbar:!0,children:[Object(G.jsxs)(_.a,{nav:!0,caret:!0,children:["Cart Details",Object(G.jsx)("i",{class:"fa fa-shopping-cart fs-4  text-primary ms-2"})]}),Object(G.jsxs)(U.a,{right:!0,children:[this.props.cart.map((function(e){return Object(G.jsxs)(I.a,{className:"d-flex justify-content-between",children:[Object(G.jsxs)("div",{children:[Object(G.jsx)(A.a,{color:"danger",className:"bg-danger me-2",onClick:function(){return t.removeFromCart(e.product)},children:"X"}),e.product.productName]}),Object(G.jsx)(A.a,{color:"primary",className:"bg-primary",children:e.quantity})]},e.product.id)})),Object(G.jsx)(I.a,{divider:!0}),Object(G.jsx)(I.a,{children:Object(G.jsx)(F.b,{to:"/cart",children:"Go To The Cart"})})]})]})}},{key:"render",value:function(){return Object(G.jsx)("div",{children:this.props.cart.length>0?this.renderSummary():this.renderEmpty()})}}]),r}(n.Component);var J=Object(v.b)((function(t){return{cart:t.cart}}),(function(t){return{actions:{removeFromCart:Object(D.b)(E,t)}}}))(M),X=function(t){var e=Object(n.useState)(!1),r=Object(s.a)(e,2),c=r[0],a=r[1];return Object(G.jsx)("div",{children:Object(G.jsxs)(u.a,{color:"light",light:!0,expand:"md",children:[Object(G.jsx)(d.a,{children:Object(G.jsx)(F.b,{to:"/online-store/",children:"Web Shop"})}),Object(G.jsx)(j.a,{onClick:function(){return a(!c)}}),Object(G.jsx)(l.a,{isOpen:c,navbar:!0,className:"justify-content-end",children:Object(G.jsxs)(h.a,{className:"mr-auto",navbar:!0,children:[Object(G.jsx)(b.a,{children:Object(G.jsx)(p.a,{children:Object(G.jsx)(F.b,{to:"/saveproduct/",children:"Add Product"})})}),Object(G.jsx)(J,{})]})})]})})},L=r(121),Q=r(116),V=r(117);function Y(t){return{type:g,payload:t}}function B(){return function(t){return fetch("https://webhooks.mongodb-realm.com/api/client/v2.0/app/online-shop-bwkwe/service/online-shop-categories/incoming_webhook/webhook-get-categories").then((function(t){return t.json()})).then((function(e){return e.sort((function(t,e){return t.id-e.id})),t({type:y,payload:e})}))}}var H=r(49),W=r.n(H),z=r(67);function K(t){return{type:N,payload:t}}function Z(t){return{type:k,payload:t}}function $(t){return function(e){var r="https://webhooks.mongodb-realm.com/api/client/v2.0/app/online-shop-bwkwe/service/online-shop-products/incoming_webhook/webhook-get-products";return t&&(r+="?categoryId="+t),fetch(r).then((function(t){return t.json()})).then((function(t){return t.sort((function(t,e){return t.id-e.id})),e({type:C,payload:t})}))}}function tt(t){return et.apply(this,arguments)}function et(){return(et=Object(z.a)(W.a.mark((function t(e){var r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.ok){t.next=2;break}return t.abrupt("return",e.json());case 2:return t.next=4,e.text();case 4:throw r=t.sent,new Error(r);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function rt(t){throw t}var nt=function(t){Object(f.a)(r,t);var e=Object(x.a)(r);function r(){return Object(O.a)(this,r),e.apply(this,arguments)}return Object(m.a)(r,[{key:"componentDidMount",value:function(){this.props.actions.getCategories()}},{key:"selectCategory",value:function(t){this.props.actions.changeCategory(t),""!==t?this.props.actions.getProducts(t.id):this.props.actions.getProducts()}},{key:"render",value:function(){var t=this;return Object(G.jsxs)("div",{className:"m-1",children:[Object(G.jsx)("h3",{children:Object(G.jsx)(A.a,{className:"badge bg-warning text-dark",children:"Categories"})}),Object(G.jsxs)(Q.a,{children:[Object(G.jsx)(V.a,{active:""===this.props.currentCategory||null,onClick:function(){return t.selectCategory("")},children:"All Categories"},-1),this.props.categories.map((function(e){return Object(G.jsx)(V.a,{active:e.id===t.props.currentCategory.id,onClick:function(){return t.selectCategory(e)},children:e.categoryName},e.id)}))]})]})}}]),r}(n.Component);var ct=Object(v.b)((function(t){return{currentCategory:t.currentCategory,categories:t.categoriesArray}}),(function(t){return{actions:{getCategories:Object(D.b)(B,t),changeCategory:Object(D.b)(Y,t),getProducts:Object(D.b)($,t)}}}))(nt),at=r(119),ot=r(64),it=function(t){Object(f.a)(r,t);var e=Object(x.a)(r);function r(){var t;Object(O.a)(this,r);for(var n=arguments.length,c=new Array(n),a=0;a<n;a++)c[a]=arguments[a];return(t=e.call.apply(e,[this].concat(c))).addToCart=function(e){t.props.actions.addToCart({quantity:1,product:e}),q.a.success(e.productName+" has been added to cart")},t}return Object(m.a)(r,[{key:"componentDidMount",value:function(){this.props.actions.getProducts()}},{key:"render",value:function(){var t=this;return Object(G.jsxs)(o.a,{className:"m-1 ",children:[Object(G.jsxs)("h3",{children:[Object(G.jsx)(A.a,{color:"warning",className:"badge bg-warning text-dark me-3",children:"Products"}),Object(G.jsx)(A.a,{color:"success",className:"badge bg-success",children:this.props.currentCategory.categoryName})]}),Object(G.jsx)("div",{className:"",children:Object(G.jsxs)(at.a,{children:[Object(G.jsx)("thead",{children:Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{children:"#"}),Object(G.jsx)("th",{children:"Product Name"}),Object(G.jsx)("th",{children:"Unit Price"}),Object(G.jsx)("th",{children:"Quantity Per Unit"}),Object(G.jsx)("th",{children:"Units In Stock"}),Object(G.jsx)("th",{children:"Add to Cart"})]})}),Object(G.jsx)("tbody",{children:this.props.products.map((function(e){return Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{scope:"row",children:e.id}),Object(G.jsx)("td",{children:Object(G.jsx)(F.b,{to:"/saveproduct/"+e.id,children:e.productName})}),Object(G.jsx)("td",{children:e.unitPrice}),Object(G.jsx)("td",{children:e.quantityPerUnit}),Object(G.jsx)("td",{children:e.unitsInStock}),Object(G.jsx)("td",{children:Object(G.jsx)(ot.a,{color:"primary",onClick:function(){return t.addToCart(e)},children:"+"})})]},e.id)}))})]})})]})}}]),r}(n.Component);var st=Object(v.b)((function(t){return{currentCategory:t.currentCategory,products:t.products}}),(function(t){return{actions:{getProducts:Object(D.b)($,t),addToCart:Object(D.b)(S,t)}}}))(it),ut=function(t){Object(f.a)(r,t);var e=Object(x.a)(r);function r(){return Object(O.a)(this,r),e.apply(this,arguments)}return Object(m.a)(r,[{key:"render",value:function(){return Object(G.jsx)(o.a,{children:Object(G.jsxs)(i.a,{children:[Object(G.jsx)(L.a,{xs:"3",children:Object(G.jsx)(ct,{})}),Object(G.jsx)(L.a,{xs:"9",children:Object(G.jsx)(st,{})})]})})}}]),r}(n.Component),dt=r(10),jt=function(t){Object(f.a)(r,t);var e=Object(x.a)(r);function r(){return Object(O.a)(this,r),e.apply(this,arguments)}return Object(m.a)(r,[{key:"removeFromCart",value:function(t){this.props.actions.removeFromCart(t),q.a.error(t.productName+" has been removed from the cart")}},{key:"render",value:function(){var t=this;return Object(G.jsxs)("div",{children:[Object(G.jsx)("h1",{children:"Your Cart"}),Object(G.jsx)("div",{className:"",children:Object(G.jsxs)(at.a,{children:[Object(G.jsx)("thead",{children:Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{children:"#"}),Object(G.jsx)("th",{children:"Product Name"}),Object(G.jsx)("th",{children:"Unit Price"}),Object(G.jsx)("th",{children:"Quantity "}),Object(G.jsx)("th",{})]})}),Object(G.jsx)("tbody",{children:this.props.cart.map((function(e){return Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{scope:"row",children:e.product.id}),Object(G.jsx)("td",{children:e.product.productName}),Object(G.jsx)("td",{children:e.product.unitPrice}),Object(G.jsx)("td",{children:e.quantity}),Object(G.jsx)("td",{children:Object(G.jsx)(ot.a,{color:"danger",onClick:function(){return t.removeFromCart(e.product)},children:"X"})})]},e.id)}))})]})})]})}}]),r}(n.Component);var lt=Object(v.b)((function(t){return{cart:t.cart}}),(function(t){return{actions:{removeFromCart:Object(D.b)(E,t)}}}))(jt),ht=r(38),bt=r(20),pt=r(70),Ot=function(t){var e=t.name,r=t.label,n=t.onChange,c=t.placeHolder,a=t.value,o=t.error,i="form-group";return o&&o.length>0&&(i+="has-error"),Object(G.jsxs)("div",{className:i,children:[Object(G.jsx)("label",{htmlFor:e,children:r}),Object(G.jsxs)("div",{className:"field",children:[Object(G.jsx)("input",{type:"text",name:e,className:"form-control",placeholder:c,value:a,onChange:n}),o&&Object(G.jsx)("div",{className:"alert alert-danger",children:o})]})]})},mt=function(t){var e=t.name,r=t.label,n=t.onChange,c=t.defaultOption,a=t.value,o=t.error,i=t.options;return Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("label",{htmlFor:e,children:r}),Object(G.jsxs)("select",{name:e,value:a,onChange:n,className:"form-control",children:[Object(G.jsx)("option",{value:"",children:c}),i.map((function(t){return Object(G.jsx)("option",{value:t.value,children:t.text},t.value)}))]}),o&&Object(G.jsx)("div",{className:"alert alert-danger",children:o})]})},ft=function(t){var e=t.categories,r=t.product,n=t.onSave,c=t.onChange,a=t.errors;return Object(G.jsxs)("form",{onSubmit:n,children:[Object(G.jsx)("h2",{children:r.id?"UPDATE":"ADD NEW PRODUCT"}),Object(G.jsx)(Ot,{name:"productName",label:"Product Name",value:r.productName,onChange:c,error:a.productName}),Object(G.jsx)(mt,{name:"categoryId",label:"Category",value:r.categoryId||"",defaultOption:"Please Select",options:e.map((function(t){return{value:t.id,text:t.categoryName}})),onChange:c,error:a.categoryId}),Object(G.jsx)(Ot,{name:"unitPrice",label:"Unit Price",value:r.unitPrice,onChange:c,error:a.unitPrice}),Object(G.jsx)(Ot,{name:"quantityPerUnit",label:"Quantity Per Unit",value:r.quantityPerUnit,onChange:c,error:a.quantityPerUnit}),Object(G.jsx)(Ot,{name:"unitsInStock",label:"Units In Stock",value:r.unitsInStock,onChange:c,error:a.unitsInStock}),Object(G.jsx)("button",{type:"submit",className:"btn btn-success",children:"SAVE"})]})};var xt={getCategories:B,saveProduct:function(t){return t.unitPrice=parseInt(t.unitPrice),t.unitsInStock=parseInt(t.unitsInStock),t.id?function(e){return function(t){return fetch("https://webhooks.mongodb-realm.com/api/client/v2.0/app/online-shop-bwkwe/service/online-shop-products/incoming_webhook/webhook-update-product",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(tt).catch(rt)}(t).then((function(r){t.id?e(Z(r)):e(K(r))})).catch((function(t){throw t}))}:(t.id=666,function(e){return function(t){return fetch("https://webhooks.mongodb-realm.com/api/client/v2.0/app/online-shop-bwkwe/service/online-shop-products/incoming_webhook/insert-product",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(tt).catch(rt)}(t).then((function(r){t.id?e(Z(r)):e(K(r))})).catch((function(t){throw t}))})}},vt=Object(v.b)((function(t,e){var r=e.match.params.productId;return{product:r&&t.products.length>0?function(t,e){return t.find((function(t){return t.id==e}))||null}(t.products,r):{},products:t.products,categories:t.categoriesArray}}),xt)((function(t){t.products;var e=t.categories,r=(t.getProducts,t.getCategories),c=t.saveProduct,a=t.history,o=Object(pt.a)(t,["products","categories","getProducts","getCategories","saveProduct","history"]),i=Object(n.useState)(Object(bt.a)({},o.product)),u=Object(s.a)(i,2),d=u[0],j=u[1],l=Object(n.useState)({}),h=Object(s.a)(l,2),b=h[0],p=h[1];return Object(n.useEffect)((function(){0===e.length&&r(),j(Object(bt.a)({},o.product))}),[o.product]),Object(G.jsx)(ft,{product:d,categories:e,onChange:function(t){var e=t.target,r=e.name,n=e.value;j((function(t){return Object(bt.a)(Object(bt.a)({},t),{},Object(ht.a)({},r,"categoryId"===r?parseInt(n,10):n))})),function(t,e){p("productName"===t&&""===e?function(t){return Object(bt.a)(Object(bt.a)({},t),{},{productName:"Should have a product name"})}:function(t){return Object(bt.a)(Object(bt.a)({},t),{},{productName:""})})}(r,n)},onSave:function(t){t.preventDefault(),c(d).then((function(){a.push("/")}))},errors:b})})),gt=function(t){Object(f.a)(r,t);var e=Object(x.a)(r);function r(){return Object(O.a)(this,r),e.apply(this,arguments)}return Object(m.a)(r,[{key:"render",value:function(){return Object(G.jsx)("div",{className:"mt-5 text-center",children:Object(G.jsx)("h2",{className:"my-5",children:"Page Not Found"})})}}]),r}(n.Component);var yt=function(){return Object(G.jsxs)(o.a,{className:"p-2",children:[Object(G.jsx)(i.a,{className:"m-1",children:Object(G.jsx)(X,{})}),Object(G.jsx)(i.a,{className:"m-1",children:Object(G.jsxs)(dt.c,{children:[Object(G.jsx)(dt.a,{path:"/",exact:!0,component:ut}),Object(G.jsx)(dt.a,{path:"/online-store/",exact:!0,component:ut}),Object(G.jsx)(dt.a,{path:"/products",exact:!0,component:ut}),Object(G.jsx)(dt.a,{path:"/cart",exact:!0,component:lt}),Object(G.jsx)(dt.a,{path:"/saveproduct/:productId",component:vt}),Object(G.jsx)(dt.a,{path:"/saveproduct/",component:vt}),Object(G.jsx)(dt.a,{exact:!0,component:gt})]})})]})},Ct=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,125)).then((function(e){var r=e.getCLS,n=e.getFID,c=e.getFCP,a=e.getLCP,o=e.getTTFB;r(t),n(t),c(t),a(t),o(t)}))},Nt=(r(102),r(103),r(104),r(105),{currentCategory:{categoryName:"Empty"},categories:[],products:[],cart:[],savedProduct:{}});var kt=r(69);var Pt=Object(D.c)({currentCategory:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt.currentCategory,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case g:return e.payload;default:return t}},categoriesArray:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt.categories,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case y:return e.payload;default:return t}},products:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt.products,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case C:return e.payload;default:return t}},cart:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt.cart,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case P:var r=t.find((function(t){return t.product.id===e.payload.product.id}));if(r){var n=t.map((function(t){return t.product.id===e.payload.product.id?Object.assign({},r,{quantity:r.quantity+1}):t}));return n}return[].concat(Object(kt.a)(t),[Object(bt.a)({},e.payload)]);case w:var c=t.filter((function(t){return t.product.id!==e.payload.id}));return c;default:return t}},savedProduct:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt.savedProduct,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case k:case N:return e.payload;default:return t}}}),wt=r(68);var St=function(){var t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||D.d;return Object(D.e)(Pt,t(Object(D.a)(wt.a)))}();a.a.render(Object(G.jsx)(F.a,{children:Object(G.jsx)(v.a,{store:St,children:Object(G.jsx)(yt,{})})}),document.getElementById("root")),Ct()}},[[106,1,2]]]);
//# sourceMappingURL=main.cc868247.chunk.js.map