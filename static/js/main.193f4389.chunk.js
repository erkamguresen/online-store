(this["webpackJsonponline-store"]=this["webpackJsonponline-store"]||[]).push([[0],{106:function(t,e,r){"use strict";r.r(e);var c=r(1),n=r(23),a=r.n(n),o=r(118),i=r(120),s=r(33),u=r(111),d=r(112),j=r(113),l=r(114),b=r(115),h=r(107),p=r(108),O=r(14),m=r(15),x=r(18),f=r(17),v=r(16),g="CHANGE_CATEGORY",y="GET_CATEGORIES_SUCCESS",C="GET_PRODUCTS_SUCCESS",N="CREATE_PRODUCT_SUCCESS",P="UPDATE_PRODUCT_SUCCESS",S="ADD_TO_CART",k="REMOVE_FROM_CART";function E(t){return{type:S,payload:t}}function T(t){return{type:k,payload:t}}var w=r(122),U=r(123),_=r(124),I=r(109),A=r(110),D=r(12),F=r(21),R=r(28),q=r.n(R),G=r(2),M=function(t){Object(x.a)(r,t);var e=Object(f.a)(r);function r(){return Object(O.a)(this,r),e.apply(this,arguments)}return Object(m.a)(r,[{key:"removeFromCart",value:function(t){this.props.actions.removeFromCart(t),q.a.error(t.productName+" has been removed from the cart")}},{key:"renderEmpty",value:function(){return Object(G.jsx)(h.a,{children:Object(G.jsx)(p.a,{children:"Your cart is empty"})})}},{key:"renderSummary",value:function(){var t=this;return Object(G.jsxs)(w.a,{nav:!0,inNavbar:!0,children:[Object(G.jsxs)(U.a,{nav:!0,caret:!0,children:["Cart Details",Object(G.jsx)("i",{class:"fa fa-shopping-cart fs-4  text-primary ms-2"})]}),Object(G.jsxs)(_.a,{right:!0,children:[this.props.cart.map((function(e){return Object(G.jsxs)(I.a,{className:"d-flex justify-content-between",children:[Object(G.jsxs)("div",{children:[Object(G.jsx)(A.a,{color:"danger",className:"bg-danger me-2",onClick:function(){return t.removeFromCart(e.product)},children:"X"}),e.product.productName]}),Object(G.jsx)(A.a,{color:"primary",className:"bg-primary",children:e.quantity})]},e.product.id)})),Object(G.jsx)(I.a,{divider:!0}),Object(G.jsx)(I.a,{children:Object(G.jsx)(F.b,{to:"/cart",children:"Go To The Cart"})})]})]})}},{key:"render",value:function(){return Object(G.jsx)("div",{children:this.props.cart.length>0?this.renderSummary():this.renderEmpty()})}}]),r}(c.Component);var X=Object(v.b)((function(t){return{cart:t.cart}}),(function(t){return{actions:{removeFromCart:Object(D.b)(T,t)}}}))(M),J=function(t){var e=Object(c.useState)(!1),r=Object(s.a)(e,2),n=r[0],a=r[1];return Object(G.jsx)("div",{children:Object(G.jsxs)(u.a,{color:"light",light:!0,expand:"md",children:[Object(G.jsx)(d.a,{children:Object(G.jsx)(F.b,{to:"/",children:"My Web Shop"})}),Object(G.jsx)(j.a,{onClick:function(){return a(!n)}}),Object(G.jsx)(l.a,{isOpen:n,navbar:!0,className:"justify-content-end",children:Object(G.jsxs)(b.a,{className:"mr-auto",navbar:!0,children:[Object(G.jsx)(h.a,{children:Object(G.jsx)(p.a,{children:Object(G.jsx)(F.b,{to:"/saveproduct/",children:"Add Product"})})}),Object(G.jsx)(X,{})]})})]})})},L=r(121),Q=r(116),V=r(117);function Y(t){return{type:g,payload:t}}function B(){return function(t){return fetch("http://localhost:3000/categories").then((function(t){return t.json()})).then((function(e){return t({type:y,payload:e})}))}}var H=r(49),W=r.n(H),z=r(67);function K(t){return function(e){var r="http://localhost:3000/products";return t&&(r+="?categoryId="+t),fetch(r).then((function(t){return t.json()})).then((function(t){return e({type:C,payload:t})}))}}function Z(t){return $.apply(this,arguments)}function $(){return($=Object(z.a)(W.a.mark((function t(e){var r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.ok){t.next=2;break}return t.abrupt("return",e.json());case 2:return t.next=4,e.text();case 4:throw r=t.sent,new Error(r);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function tt(t){throw t}var et=function(t){Object(x.a)(r,t);var e=Object(f.a)(r);function r(){return Object(O.a)(this,r),e.apply(this,arguments)}return Object(m.a)(r,[{key:"componentDidMount",value:function(){this.props.actions.getCategories()}},{key:"selectCategory",value:function(t){this.props.actions.changeCategory(t),this.props.actions.getProducts(t.id)}},{key:"render",value:function(){var t=this;return Object(G.jsxs)("div",{className:"border border-1 border-info m-1",children:[Object(G.jsx)("h3",{children:Object(G.jsx)(A.a,{className:"badge bg-warning text-dark",children:"Categories"})}),Object(G.jsx)(Q.a,{children:this.props.categories.map((function(e){return Object(G.jsx)(V.a,{active:e.id===t.props.currentCategory.id,onClick:function(){return t.selectCategory(e)},children:e.categoryName},e.id)}))})]})}}]),r}(c.Component);var rt=Object(v.b)((function(t){return{currentCategory:t.currentCategory,categories:t.categoriesArray}}),(function(t){return{actions:{getCategories:Object(D.b)(B,t),changeCategory:Object(D.b)(Y,t),getProducts:Object(D.b)(K,t)}}}))(et),ct=r(119),nt=r(64),at=function(t){Object(x.a)(r,t);var e=Object(f.a)(r);function r(){var t;Object(O.a)(this,r);for(var c=arguments.length,n=new Array(c),a=0;a<c;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))).addToCart=function(e){t.props.actions.addToCart({quantity:1,product:e}),q.a.success(e.productName+" has been added to cart")},t}return Object(m.a)(r,[{key:"componentDidMount",value:function(){this.props.actions.getProducts()}},{key:"render",value:function(){var t=this;return Object(G.jsxs)(o.a,{className:"border border-1 border-success m-1 ",children:[Object(G.jsxs)("h3",{children:[Object(G.jsx)(A.a,{color:"warning",className:"badge bg-warning text-dark me-3",children:"Products"}),Object(G.jsx)(A.a,{color:"success",className:"badge bg-success",children:this.props.currentCategory.categoryName})]}),Object(G.jsx)("div",{className:"",children:Object(G.jsxs)(ct.a,{children:[Object(G.jsx)("thead",{children:Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{children:"#"}),Object(G.jsx)("th",{children:"Product Name"}),Object(G.jsx)("th",{children:"Unit Price"}),Object(G.jsx)("th",{children:"Quantity Per Unit"}),Object(G.jsx)("th",{children:"Units In Stock"}),Object(G.jsx)("th",{children:"Add to Cart"})]})}),Object(G.jsx)("tbody",{children:this.props.products.map((function(e){return Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{scope:"row",children:e.id}),Object(G.jsx)("td",{children:Object(G.jsx)(F.b,{to:"/saveproduct/"+e.id,children:e.productName})}),Object(G.jsx)("td",{children:e.unitPrice}),Object(G.jsx)("td",{children:e.quantityPerUnit}),Object(G.jsx)("td",{children:e.unitsInStock}),Object(G.jsx)("td",{children:Object(G.jsx)(nt.a,{color:"primary",onClick:function(){return t.addToCart(e)},children:"+"})})]},e.id)}))})]})})]})}}]),r}(c.Component);var ot=Object(v.b)((function(t){return{currentCategory:t.currentCategory,products:t.products}}),(function(t){return{actions:{getProducts:Object(D.b)(K,t),addToCart:Object(D.b)(E,t)}}}))(at),it=function(t){Object(x.a)(r,t);var e=Object(f.a)(r);function r(){return Object(O.a)(this,r),e.apply(this,arguments)}return Object(m.a)(r,[{key:"render",value:function(){return Object(G.jsx)(o.a,{children:Object(G.jsxs)(i.a,{children:[Object(G.jsx)(L.a,{xs:"3",children:Object(G.jsx)(rt,{})}),Object(G.jsx)(L.a,{xs:"9",children:Object(G.jsx)(ot,{})})]})})}}]),r}(c.Component),st=r(10),ut=function(t){Object(x.a)(r,t);var e=Object(f.a)(r);function r(){return Object(O.a)(this,r),e.apply(this,arguments)}return Object(m.a)(r,[{key:"removeFromCart",value:function(t){this.props.actions.removeFromCart(t),q.a.error(t.productName+" has been removed from the cart")}},{key:"render",value:function(){var t=this;return Object(G.jsxs)("div",{children:[Object(G.jsx)("h1",{children:"Your Cart"}),Object(G.jsx)("div",{className:"",children:Object(G.jsxs)(ct.a,{children:[Object(G.jsx)("thead",{children:Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{children:"#"}),Object(G.jsx)("th",{children:"Product Name"}),Object(G.jsx)("th",{children:"Unit Price"}),Object(G.jsx)("th",{children:"Quantity "}),Object(G.jsx)("th",{})]})}),Object(G.jsx)("tbody",{children:this.props.cart.map((function(e){return Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{scope:"row",children:e.product.id}),Object(G.jsx)("td",{children:e.product.productName}),Object(G.jsx)("td",{children:e.product.unitPrice}),Object(G.jsx)("td",{children:e.quantity}),Object(G.jsx)("td",{children:Object(G.jsx)(nt.a,{color:"danger",onClick:function(){return t.removeFromCart(e.product)},children:"X"})})]},e.id)}))})]})})]})}}]),r}(c.Component);var dt=Object(v.b)((function(t){return{cart:t.cart}}),(function(t){return{actions:{removeFromCart:Object(D.b)(T,t)}}}))(ut),jt=r(38),lt=r(20),bt=r(70),ht=function(t){var e=t.name,r=t.label,c=t.onChange,n=t.placeHolder,a=t.value,o=t.error,i="form-group";return o&&o.length>0&&(i+="has-error"),Object(G.jsxs)("div",{className:i,children:[Object(G.jsx)("label",{htmlFor:e,children:r}),Object(G.jsxs)("div",{className:"field",children:[Object(G.jsx)("input",{type:"text",name:e,className:"form-control",placeholder:n,value:a,onChange:c}),o&&Object(G.jsx)("div",{className:"alert alert-danger",children:o})]})]})},pt=function(t){var e=t.name,r=t.label,c=t.onChange,n=t.defaultOption,a=t.value,o=t.error,i=t.options;return Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("label",{htmlFor:e,children:r}),Object(G.jsxs)("select",{name:e,value:a,onChange:c,className:"form-control",children:[Object(G.jsx)("option",{value:"",children:n}),i.map((function(t){return Object(G.jsx)("option",{value:t.value,children:t.text},t.value)}))]}),o&&Object(G.jsx)("div",{className:"alert alert-danger",children:o})]})},Ot=function(t){var e=t.categories,r=t.product,c=t.onSave,n=t.onChange,a=t.errors;return Object(G.jsxs)("form",{onSubmit:c,children:[Object(G.jsx)("h2",{children:r.id?"UPDATE":"ADD NEW PRODUCT"}),Object(G.jsx)(ht,{name:"productName",label:"Product Name",value:r.productName,onChange:n,error:a.productName}),Object(G.jsx)(pt,{name:"categoryId",label:"Category",value:r.categoryId||"",defaultOption:"Please Select",options:e.map((function(t){return{value:t.id,text:t.categoryName}})),onChange:n,error:a.categoryId}),Object(G.jsx)(ht,{name:"unitPrice",label:"Unit Price",value:r.unitPrice,onChange:n,error:a.unitPrice}),Object(G.jsx)(ht,{name:"quantityPerUnit",label:"Quantity Per Unit",value:r.quantityPerUnit,onChange:n,error:a.quantityPerUnit}),Object(G.jsx)(ht,{name:"unitsInStock",label:"Units In Stock",value:r.unitsInStock,onChange:n,error:a.unitsInStock}),Object(G.jsx)("button",{type:"submit",className:"btn btn-success",children:"SAVE"})]})};var mt={getCategories:B,saveProduct:function(t){return function(e){return function(t){return fetch("http://localhost:3000/products/"+(t.id||""),{method:t.id?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(Z).catch(tt)}(t).then((function(r){t.id?e({type:P,payload:r}):e(function(t){return{type:N,payload:t}}(r))})).catch((function(t){throw t}))}}},xt=Object(v.b)((function(t,e){var r=e.match.params.productId;return{product:r&&t.products.length>0?function(t,e){return t.find((function(t){return t.id==e}))||null}(t.products,r):{},products:t.products,categories:t.categoriesArray}}),mt)((function(t){t.products;var e=t.categories,r=(t.getProducts,t.getCategories),n=t.saveProduct,a=t.history,o=Object(bt.a)(t,["products","categories","getProducts","getCategories","saveProduct","history"]),i=Object(c.useState)(Object(lt.a)({},o.product)),u=Object(s.a)(i,2),d=u[0],j=u[1],l=Object(c.useState)({}),b=Object(s.a)(l,2),h=b[0],p=b[1];return Object(c.useEffect)((function(){0===e.length&&r(),j(Object(lt.a)({},o.product))}),[o.product]),Object(G.jsx)(Ot,{product:d,categories:e,onChange:function(t){var e=t.target,r=e.name,c=e.value;j((function(t){return Object(lt.a)(Object(lt.a)({},t),{},Object(jt.a)({},r,"categoryId"===r?parseInt(c,10):c))})),function(t,e){p("productName"===t&&""===e?function(t){return Object(lt.a)(Object(lt.a)({},t),{},{productName:"Should have a product name"})}:function(t){return Object(lt.a)(Object(lt.a)({},t),{},{productName:""})})}(r,c)},onSave:function(t){t.preventDefault(),n(d).then((function(){a.push("/")}))},errors:h})})),ft=function(t){Object(x.a)(r,t);var e=Object(f.a)(r);function r(){return Object(O.a)(this,r),e.apply(this,arguments)}return Object(m.a)(r,[{key:"render",value:function(){return Object(G.jsx)("div",{className:"mt-5 text-center",children:Object(G.jsx)("h2",{className:"my-5",children:"Page Not Found"})})}}]),r}(c.Component);var vt=function(){return Object(G.jsxs)(o.a,{className:"border border-primary border-2 p-2",children:[Object(G.jsx)(i.a,{className:"border border-danger border-1 m-1",children:Object(G.jsx)(J,{})}),Object(G.jsx)(i.a,{className:"border border-warning border-1 m-1",children:Object(G.jsxs)(st.c,{children:[Object(G.jsx)(st.a,{path:"/",exact:!0,component:it}),Object(G.jsx)(st.a,{path:"/products",exact:!0,component:it}),Object(G.jsx)(st.a,{path:"/cart",exact:!0,component:dt}),Object(G.jsx)(st.a,{path:"/saveproduct/:productId",component:xt}),Object(G.jsx)(st.a,{path:"/saveproduct/",component:xt}),Object(G.jsx)(st.a,{exact:!0,component:ft})]})})]})},gt=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,125)).then((function(e){var r=e.getCLS,c=e.getFID,n=e.getFCP,a=e.getLCP,o=e.getTTFB;r(t),c(t),n(t),a(t),o(t)}))},yt=(r(102),r(103),r(104),r(105),{currentCategory:{categoryName:"Empty"},categories:[],products:[],cart:[],savedProduct:{}});var Ct=r(69);var Nt=Object(D.c)({currentCategory:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt.currentCategory,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case g:return e.payload;default:return t}},categoriesArray:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt.categories,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case y:return e.payload;default:return t}},products:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt.products,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case C:return e.payload;default:return t}},cart:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt.cart,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case S:var r=t.find((function(t){return t.product.id===e.payload.product.id}));if(r){var c=t.map((function(t){return t.product.id===e.payload.product.id?Object.assign({},r,{quantity:r.quantity+1}):t}));return c}return[].concat(Object(Ct.a)(t),[Object(lt.a)({},e.payload)]);case k:var n=t.filter((function(t){return t.product.id!==e.payload.id}));return n;default:return t}},savedProduct:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt.savedProduct,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case P:case N:return e.payload;default:return t}}}),Pt=r(68);var St=function(){var t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||D.d;return Object(D.e)(Nt,t(Object(D.a)(Pt.a)))}();a.a.render(Object(G.jsx)(F.a,{children:Object(G.jsx)(v.a,{store:St,children:Object(G.jsx)(vt,{})})}),document.getElementById("root")),gt()}},[[106,1,2]]]);
//# sourceMappingURL=main.193f4389.chunk.js.map