(this["webpackJsonponline-store"]=this["webpackJsonponline-store"]||[]).push([[0],{106:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r(23),a=r.n(c),o=r(118),i=r(120),s=r(27),u=r(111),d=r(112),j=r(113),l=r(114),b=r(115),h=r(107),p=r(108),O=r(14),m=r(15),f=r(18),v=r(17),x=r(16),g="CHANGE_CATEGORY",y="GET_CATEGORIES_SUCCESS",C="GET_PRODUCTS_SUCCESS",N="CREATE_PRODUCT_SUCCESS",k="UPDATE_PRODUCT_SUCCESS",P="ADD_TO_CART",w="REMOVE_FROM_CART";function S(e){return{type:P,payload:e}}function E(e){return{type:w,payload:e}}var T=r(122),U=r(123),_=r(124),I=r(109),D=r(110),A=r(12),F=r(21),R=r(29),q=r.n(R),G=r(2),M=function(e){Object(f.a)(r,e);var t=Object(v.a)(r);function r(){return Object(O.a)(this,r),t.apply(this,arguments)}return Object(m.a)(r,[{key:"removeFromCart",value:function(e){this.props.actions.removeFromCart(e),q.a.error(e.productName+" has been removed from the cart")}},{key:"renderEmpty",value:function(){return Object(G.jsx)(h.a,{children:Object(G.jsx)(p.a,{children:"Your cart is empty"})})}},{key:"renderSummary",value:function(){var e=this;return Object(G.jsxs)(T.a,{nav:!0,inNavbar:!0,children:[Object(G.jsxs)(U.a,{nav:!0,caret:!0,children:["Cart Details",Object(G.jsx)("i",{class:"fa fa-shopping-cart fs-4  text-primary ms-2"})]}),Object(G.jsxs)(_.a,{right:!0,children:[this.props.cart.map((function(t){return Object(G.jsxs)(I.a,{className:"d-flex justify-content-between",children:[Object(G.jsxs)("div",{children:[Object(G.jsx)(D.a,{color:"danger",className:"bg-danger me-2",onClick:function(){return e.removeFromCart(t.product)},children:"X"}),t.product.productName]}),Object(G.jsx)(D.a,{color:"primary",className:"bg-primary",children:t.quantity})]},t.product.id)})),Object(G.jsx)(I.a,{divider:!0}),Object(G.jsx)(I.a,{children:Object(G.jsx)(F.b,{to:"/cart",children:"Go To The Cart"})})]})]})}},{key:"render",value:function(){return Object(G.jsx)("div",{children:this.props.cart.length>0?this.renderSummary():this.renderEmpty()})}}]),r}(n.Component);var X=Object(x.b)((function(e){return{cart:e.cart}}),(function(e){return{actions:{removeFromCart:Object(A.b)(E,e)}}}))(M),J=function(e){var t=Object(n.useState)(!1),r=Object(s.a)(t,2),c=r[0],a=r[1];return Object(G.jsx)("div",{children:Object(G.jsxs)(u.a,{color:"light",light:!0,expand:"md",children:[Object(G.jsx)(d.a,{children:Object(G.jsx)(F.b,{to:"/online-store/",children:"Web Shop"})}),Object(G.jsx)(j.a,{onClick:function(){return a(!c)}}),Object(G.jsx)(l.a,{isOpen:c,navbar:!0,className:"justify-content-end",children:Object(G.jsxs)(b.a,{className:"mr-auto",navbar:!0,children:[Object(G.jsx)(h.a,{children:Object(G.jsx)(p.a,{})}),Object(G.jsx)(X,{})]})})]})})},L=r(121),Q=r(116),V=r(117);function Y(e){return{type:g,payload:e}}function B(){return function(e){return fetch("https://webhooks.mongodb-realm.com/api/client/v2.0/app/online-shop-bwkwe/service/online-shop-categories/incoming_webhook/webhook-get-categories").then((function(e){return e.json()})).then((function(t){return e({type:y,payload:t})}))}}var H=r(49),W=r.n(H),z=r(67);function K(e){return function(t){var r="https://webhooks.mongodb-realm.com/api/client/v2.0/app/online-shop-bwkwe/service/online-shop-products/incoming_webhook/webhook-get-products";return e&&(r+="?categoryId="+e),console.log(r),fetch(r).then((function(e){var t=e.json();return console.log(t),t})).then((function(e){var r=function(e){for(var t=[],r=0;r<e.length;r++){for(var n=e[r],c=0,a=Object.entries(n);c<a.length;c++){var o=Object(s.a)(a[c],2),i=o[0];if("object"===typeof o[1]){var u=Object.keys(n[i])[0];n[i]=n[i][u]}}t.push(n)}return t}(e);return t({type:C,payload:r})}))}}function Z(e){return $.apply(this,arguments)}function $(){return($=Object(z.a)(W.a.mark((function e(t){var r;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t.json());case 2:return e.next=4,t.text();case 4:throw r=e.sent,new Error(r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e){throw e}var te=function(e){Object(f.a)(r,e);var t=Object(v.a)(r);function r(){return Object(O.a)(this,r),t.apply(this,arguments)}return Object(m.a)(r,[{key:"componentDidMount",value:function(){this.props.actions.getCategories()}},{key:"selectCategory",value:function(e){this.props.actions.changeCategory(e),this.props.actions.getProducts(e.id)}},{key:"render",value:function(){var e=this;return Object(G.jsxs)("div",{className:"border border-1 border-info m-1",children:[Object(G.jsx)("h3",{children:Object(G.jsx)(D.a,{className:"badge bg-warning text-dark",children:"Categories"})}),Object(G.jsx)(Q.a,{children:this.props.categories.map((function(t){return Object(G.jsx)(V.a,{active:t.id===e.props.currentCategory.id,onClick:function(){return e.selectCategory(t)},children:t.categoryName},t.id)}))})]})}}]),r}(n.Component);var re=Object(x.b)((function(e){return{currentCategory:e.currentCategory,categories:e.categoriesArray}}),(function(e){return{actions:{getCategories:Object(A.b)(B,e),changeCategory:Object(A.b)(Y,e),getProducts:Object(A.b)(K,e)}}}))(te),ne=r(119),ce=r(64),ae=function(e){Object(f.a)(r,e);var t=Object(v.a)(r);function r(){var e;Object(O.a)(this,r);for(var n=arguments.length,c=new Array(n),a=0;a<n;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).addToCart=function(t){e.props.actions.addToCart({quantity:1,product:t}),q.a.success(t.productName+" has been added to cart")},e}return Object(m.a)(r,[{key:"componentDidMount",value:function(){this.props.actions.getProducts()}},{key:"render",value:function(){var e=this;return Object(G.jsxs)(o.a,{className:"border border-1 border-success m-1 ",children:[Object(G.jsxs)("h3",{children:[Object(G.jsx)(D.a,{color:"warning",className:"badge bg-warning text-dark me-3",children:"Products"}),Object(G.jsx)(D.a,{color:"success",className:"badge bg-success",children:this.props.currentCategory.categoryName})]}),Object(G.jsx)("div",{className:"",children:Object(G.jsxs)(ne.a,{children:[Object(G.jsx)("thead",{children:Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{children:"#"}),Object(G.jsx)("th",{children:"Product Name"}),Object(G.jsx)("th",{children:"Unit Price"}),Object(G.jsx)("th",{children:"Quantity Per Unit"}),Object(G.jsx)("th",{children:"Units In Stock"}),Object(G.jsx)("th",{children:"Add to Cart"})]})}),Object(G.jsx)("tbody",{children:this.props.products.map((function(t){return Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{scope:"row",children:t.id}),Object(G.jsx)("td",{children:Object(G.jsx)(F.b,{to:"/saveproduct/"+t.id,children:t.productName})}),Object(G.jsx)("td",{children:t.unitPrice}),Object(G.jsx)("td",{children:t.quantityPerUnit}),Object(G.jsx)("td",{children:t.unitsInStock}),Object(G.jsx)("td",{children:Object(G.jsx)(ce.a,{color:"primary",onClick:function(){return e.addToCart(t)},children:"+"})})]},t.id)}))})]})})]})}}]),r}(n.Component);var oe=Object(x.b)((function(e){return{currentCategory:e.currentCategory,products:e.products}}),(function(e){return{actions:{getProducts:Object(A.b)(K,e),addToCart:Object(A.b)(S,e)}}}))(ae),ie=function(e){Object(f.a)(r,e);var t=Object(v.a)(r);function r(){return Object(O.a)(this,r),t.apply(this,arguments)}return Object(m.a)(r,[{key:"render",value:function(){return Object(G.jsx)(o.a,{children:Object(G.jsxs)(i.a,{children:[Object(G.jsx)(L.a,{xs:"3",children:Object(G.jsx)(re,{})}),Object(G.jsx)(L.a,{xs:"9",children:Object(G.jsx)(oe,{})})]})})}}]),r}(n.Component),se=r(10),ue=function(e){Object(f.a)(r,e);var t=Object(v.a)(r);function r(){return Object(O.a)(this,r),t.apply(this,arguments)}return Object(m.a)(r,[{key:"removeFromCart",value:function(e){this.props.actions.removeFromCart(e),q.a.error(e.productName+" has been removed from the cart")}},{key:"render",value:function(){var e=this;return Object(G.jsxs)("div",{children:[Object(G.jsx)("h1",{children:"Your Cart"}),Object(G.jsx)("div",{className:"",children:Object(G.jsxs)(ne.a,{children:[Object(G.jsx)("thead",{children:Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{children:"#"}),Object(G.jsx)("th",{children:"Product Name"}),Object(G.jsx)("th",{children:"Unit Price"}),Object(G.jsx)("th",{children:"Quantity "}),Object(G.jsx)("th",{})]})}),Object(G.jsx)("tbody",{children:this.props.cart.map((function(t){return Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{scope:"row",children:t.product.id}),Object(G.jsx)("td",{children:t.product.productName}),Object(G.jsx)("td",{children:t.product.unitPrice}),Object(G.jsx)("td",{children:t.quantity}),Object(G.jsx)("td",{children:Object(G.jsx)(ce.a,{color:"danger",onClick:function(){return e.removeFromCart(t.product)},children:"X"})})]},t.id)}))})]})})]})}}]),r}(n.Component);var de=Object(x.b)((function(e){return{cart:e.cart}}),(function(e){return{actions:{removeFromCart:Object(A.b)(E,e)}}}))(ue),je=r(38),le=r(20),be=r(70),he=function(e){var t=e.name,r=e.label,n=e.onChange,c=e.placeHolder,a=e.value,o=e.error,i="form-group";return o&&o.length>0&&(i+="has-error"),Object(G.jsxs)("div",{className:i,children:[Object(G.jsx)("label",{htmlFor:t,children:r}),Object(G.jsxs)("div",{className:"field",children:[Object(G.jsx)("input",{type:"text",name:t,className:"form-control",placeholder:c,value:a,onChange:n}),o&&Object(G.jsx)("div",{className:"alert alert-danger",children:o})]})]})},pe=function(e){var t=e.name,r=e.label,n=e.onChange,c=e.defaultOption,a=e.value,o=e.error,i=e.options;return Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("label",{htmlFor:t,children:r}),Object(G.jsxs)("select",{name:t,value:a,onChange:n,className:"form-control",children:[Object(G.jsx)("option",{value:"",children:c}),i.map((function(e){return Object(G.jsx)("option",{value:e.value,children:e.text},e.value)}))]}),o&&Object(G.jsx)("div",{className:"alert alert-danger",children:o})]})},Oe=function(e){var t=e.categories,r=e.product,n=e.onSave,c=e.onChange,a=e.errors;return Object(G.jsxs)("form",{onSubmit:n,children:[Object(G.jsx)("h2",{children:r.id?"UPDATE":"ADD NEW PRODUCT"}),Object(G.jsx)(he,{name:"productName",label:"Product Name",value:r.productName,onChange:c,error:a.productName}),Object(G.jsx)(pe,{name:"categoryId",label:"Category",value:r.categoryId||"",defaultOption:"Please Select",options:t.map((function(e){return{value:e.id,text:e.categoryName}})),onChange:c,error:a.categoryId}),Object(G.jsx)(he,{name:"unitPrice",label:"Unit Price",value:r.unitPrice,onChange:c,error:a.unitPrice}),Object(G.jsx)(he,{name:"quantityPerUnit",label:"Quantity Per Unit",value:r.quantityPerUnit,onChange:c,error:a.quantityPerUnit}),Object(G.jsx)(he,{name:"unitsInStock",label:"Units In Stock",value:r.unitsInStock,onChange:c,error:a.unitsInStock}),Object(G.jsx)("button",{type:"submit",className:"btn btn-success",children:"SAVE"})]})};var me={getCategories:B,saveProduct:function(e){return function(t){return function(e){return fetch("https://webhooks.mongodb-realm.com/api/client/v2.0/app/online-shop-bwkwe/service/online-shop-products/incoming_webhook/webhook-get-products"+(e.id||""),{method:e.id?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(Z).catch(ee)}(e).then((function(r){e.id?t({type:k,payload:r}):t(function(e){return{type:N,payload:e}}(r))})).catch((function(e){throw e}))}}},fe=Object(x.b)((function(e,t){var r=t.match.params.productId;return{product:r&&e.products.length>0?function(e,t){return e.find((function(e){return e.id==t}))||null}(e.products,r):{},products:e.products,categories:e.categoriesArray}}),me)((function(e){e.products;var t=e.categories,r=(e.getProducts,e.getCategories),c=e.saveProduct,a=e.history,o=Object(be.a)(e,["products","categories","getProducts","getCategories","saveProduct","history"]),i=Object(n.useState)(Object(le.a)({},o.product)),u=Object(s.a)(i,2),d=u[0],j=u[1],l=Object(n.useState)({}),b=Object(s.a)(l,2),h=b[0],p=b[1];return Object(n.useEffect)((function(){0===t.length&&r(),j(Object(le.a)({},o.product))}),[o.product]),Object(G.jsx)(Oe,{product:d,categories:t,onChange:function(e){var t=e.target,r=t.name,n=t.value;j((function(e){return Object(le.a)(Object(le.a)({},e),{},Object(je.a)({},r,"categoryId"===r?parseInt(n,10):n))})),function(e,t){p("productName"===e&&""===t?function(e){return Object(le.a)(Object(le.a)({},e),{},{productName:"Should have a product name"})}:function(e){return Object(le.a)(Object(le.a)({},e),{},{productName:""})})}(r,n)},onSave:function(e){e.preventDefault(),c(d).then((function(){a.push("/")}))},errors:h})})),ve=function(e){Object(f.a)(r,e);var t=Object(v.a)(r);function r(){return Object(O.a)(this,r),t.apply(this,arguments)}return Object(m.a)(r,[{key:"render",value:function(){return Object(G.jsx)("div",{className:"mt-5 text-center",children:Object(G.jsx)("h2",{className:"my-5",children:"Page Not Found"})})}}]),r}(n.Component);var xe=function(){return Object(G.jsxs)(o.a,{className:"border border-primary border-2 p-2",children:[Object(G.jsx)(i.a,{className:"border border-danger border-1 m-1",children:Object(G.jsx)(J,{})}),Object(G.jsx)(i.a,{className:"border border-warning border-1 m-1",children:Object(G.jsxs)(se.c,{children:[Object(G.jsx)(se.a,{path:"/",exact:!0,component:ie}),Object(G.jsx)(se.a,{path:"/online-store/",exact:!0,component:ie}),Object(G.jsx)(se.a,{path:"/products",exact:!0,component:ie}),Object(G.jsx)(se.a,{path:"/cart",exact:!0,component:de}),Object(G.jsx)(se.a,{path:"/saveproduct/:productId",component:fe}),Object(G.jsx)(se.a,{path:"/saveproduct/",component:fe}),Object(G.jsx)(se.a,{exact:!0,component:ve})]})})]})},ge=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,125)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;r(e),n(e),c(e),a(e),o(e)}))},ye=(r(102),r(103),r(104),r(105),{currentCategory:{categoryName:"Empty"},categories:[],products:[],cart:[],savedProduct:{}});var Ce=r(69);var Ne=Object(A.c)({currentCategory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye.currentCategory,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return t.payload;default:return e}},categoriesArray:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye.categories,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return t.payload;default:return e}},products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye.products,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return t.payload;default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye.cart,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:var r=e.find((function(e){return e.product.id===t.payload.product.id}));if(r){var n=e.map((function(e){return e.product.id===t.payload.product.id?Object.assign({},r,{quantity:r.quantity+1}):e}));return n}return[].concat(Object(Ce.a)(e),[Object(le.a)({},t.payload)]);case w:var c=e.filter((function(e){return e.product.id!==t.payload.id}));return c;default:return e}},savedProduct:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye.savedProduct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:case N:return t.payload;default:return e}}}),ke=r(68);var Pe=function(){var e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||A.d;return Object(A.e)(Ne,e(Object(A.a)(ke.a)))}();a.a.render(Object(G.jsx)(F.a,{children:Object(G.jsx)(x.a,{store:Pe,children:Object(G.jsx)(xe,{})})}),document.getElementById("root")),ge()}},[[106,1,2]]]);
//# sourceMappingURL=main.94be6bc0.chunk.js.map